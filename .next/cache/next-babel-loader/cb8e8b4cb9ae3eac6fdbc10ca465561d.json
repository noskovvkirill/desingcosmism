{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar _extends = _interopDefault(require('@babel/runtime/helpers/extends'));\n\nvar React = require('react');\n\nvar React__default = _interopDefault(React);\n\nvar reactThreeFiber = require('react-three-fiber');\n\nvar OrbitControls$1 = require('three/examples/jsm/controls/OrbitControls');\n\nvar mergeRefs = _interopDefault(require('react-merge-refs'));\n\nvar TrackballControls$1 = require('three/examples/jsm/controls/TrackballControls');\n\nvar _objectWithoutPropertiesLoose = _interopDefault(require('@babel/runtime/helpers/objectWithoutPropertiesLoose'));\n\nvar TransformControls$1 = require('three/examples/jsm/controls/TransformControls');\n\nvar pick = _interopDefault(require('lodash.pick'));\n\nvar omit = _interopDefault(require('lodash.omit'));\n\nvar THREE = require('three');\n\nvar _construct = _interopDefault(require('@babel/runtime/helpers/construct'));\n\nvar postprocessing = require('postprocessing');\n\nvar textmeshStandalone_umd = require('troika-3d-text/dist/textmesh-standalone.umd');\n\nvar ReactDOM = _interopDefault(require('react-dom'));\n\nvar StatsImpl = _interopDefault(require('stats.js'));\n\nvar Sky$1 = require('three/examples/jsm/objects/Sky');\n\nvar LineGeometry = require('three/examples/jsm/lines/LineGeometry');\n\nvar LineMaterial = require('three/examples/jsm/lines/LineMaterial');\n\nvar Line2 = require('three/examples/jsm/lines/Line2');\n\nvar _inheritsLoose = _interopDefault(require('@babel/runtime/helpers/inheritsLoose'));\n\nvar DRACOLoader = require('three/examples/jsm/loaders/DRACOLoader');\n\nreactThreeFiber.extend({\n  OrbitControlsImpl: OrbitControls$1.OrbitControls\n});\nvar OrbitControls = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  if (props === void 0) {\n    props = {\n      enableDamping: true\n    };\n  }\n\n  var controls = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  reactThreeFiber.useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  React.useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React__default.createElement(\"orbitControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\nreactThreeFiber.extend({\n  MapControlsImpl: OrbitControls$1.MapControls\n});\nvar MapControls = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  if (props === void 0) {\n    props = {\n      enableDamping: true\n    };\n  }\n\n  var controls = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  reactThreeFiber.useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  React.useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React__default.createElement(\"mapControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\nreactThreeFiber.extend({\n  TrackballControlsImpl: TrackballControls$1.TrackballControls\n});\nvar TrackballControls = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var controls = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  reactThreeFiber.useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  React.useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React__default.createElement(\"trackballControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\nreactThreeFiber.extend({\n  TransformControlsImpl: TransformControls$1.TransformControls\n});\nvar TransformControls = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  var transformOnlyPropNames = ['enabled', 'axis', 'mode', 'translationSnap', 'rotationSnap', 'scaleSnap', 'space', 'size', 'dragging', 'showX', 'showY', 'showZ'];\n  var transformProps = pick(props, transformOnlyPropNames);\n  var objectProps = omit(props, transformOnlyPropNames);\n  var controls = React.useRef();\n  var group = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  React.useLayoutEffect(function () {\n    var _controls$current;\n\n    return void ((_controls$current = controls.current) == null ? void 0 : _controls$current.attach(group.current));\n  }, [children]);\n  React.useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(\"transformControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, transformProps)), /*#__PURE__*/React__default.createElement(\"group\", _extends({\n    ref: group\n  }, objectProps), children));\n});\nvar Detailed = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      distances = _ref.distances,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n\n  var lod = reactThreeFiber.useUpdate(function (lod) {\n    lod.levels.length = 0;\n    lod.children.forEach(function (object, index) {\n      return lod.levels.push({\n        object: object,\n        distance: distances[index]\n      });\n    });\n  }, []);\n  reactThreeFiber.useFrame(function (state) {\n    var _lod$current;\n\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React__default.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\nvar PositionalAudio = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var url = _ref.url,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 1 : _ref$distance,\n      _ref$loop = _ref.loop,\n      loop = _ref$loop === void 0 ? true : _ref$loop,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  var sound = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera;\n\n  var _useState = React.useState(function () {\n    return new THREE.AudioListener();\n  }),\n      listener = _useState[0];\n\n  var buffer = reactThreeFiber.useLoader(THREE.AudioLoader, url);\n  React.useEffect(function () {\n    var _sound$current, _sound$current2, _sound$current3, _sound$current4;\n\n    (_sound$current = sound.current) == null ? void 0 : _sound$current.setBuffer(buffer);\n    (_sound$current2 = sound.current) == null ? void 0 : _sound$current2.setRefDistance(distance);\n    (_sound$current3 = sound.current) == null ? void 0 : _sound$current3.setLoop(loop);\n    (_sound$current4 = sound.current) == null ? void 0 : _sound$current4.play();\n    camera.add(listener);\n    return function () {\n      return void camera.remove(listener);\n    };\n  }, []);\n  return /*#__PURE__*/React__default.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\nvar PerspectiveCamera = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$makeDefault = _ref.makeDefault,\n      makeDefault = _ref$makeDefault === void 0 ? false : _ref$makeDefault,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  var _useThree = reactThreeFiber.useThree(),\n      setDefaultCamera = _useThree.setDefaultCamera,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var cameraRef = reactThreeFiber.useUpdate(function (cam) {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  React.useLayoutEffect(function () {\n    if (makeDefault) {\n      var oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return function () {\n        return setDefaultCamera(oldCam);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React__default.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\nvar OrthographicCamera = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$makeDefault = _ref.makeDefault,\n      makeDefault = _ref$makeDefault === void 0 ? false : _ref$makeDefault,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  var _useThree = reactThreeFiber.useThree(),\n      setDefaultCamera = _useThree.setDefaultCamera,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var cameraRef = reactThreeFiber.useUpdate(function (cam) {\n    return cam.updateProjectionMatrix();\n  }, [size, props]);\n  React.useLayoutEffect(function () {\n    if (makeDefault) {\n      var oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return function () {\n        return setDefaultCamera(oldCam);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React__default.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nfunction StandardEffects(_ref) {\n  var _ref$smaa = _ref.smaa,\n      smaa = _ref$smaa === void 0 ? true : _ref$smaa,\n      _ref$ao = _ref.ao,\n      ao = _ref$ao === void 0 ? true : _ref$ao,\n      _ref$bloom = _ref.bloom,\n      bloom = _ref$bloom === void 0 ? true : _ref$bloom,\n      _ref$edgeDetection = _ref.edgeDetection,\n      edgeDetection = _ref$edgeDetection === void 0 ? 0.1 : _ref$edgeDetection,\n      _ref$bloomOpacity = _ref.bloomOpacity,\n      bloomOpacity = _ref$bloomOpacity === void 0 ? 1 : _ref$bloomOpacity,\n      effects = _ref.effects;\n\n  var _useThree = reactThreeFiber.useThree(),\n      gl = _useThree.gl,\n      scene = _useThree.scene,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var smaaProps = reactThreeFiber.useLoader(postprocessing.SMAAImageLoader, '');\n  var composer = React.useMemo(function () {\n    var composer = new postprocessing.EffectComposer(gl, {\n      frameBufferType: THREE.HalfFloatType\n    });\n    composer.addPass(new postprocessing.RenderPass(scene, camera));\n\n    var smaaEffect = _construct(postprocessing.SMAAEffect, smaaProps);\n\n    smaaEffect.colorEdgesMaterial.setEdgeDetectionThreshold(edgeDetection);\n    var normalPass = new postprocessing.NormalPass(scene, camera);\n    var ssaoEffect = new postprocessing.SSAOEffect(camera, normalPass.renderTarget.texture, _extends({\n      blendFunction: postprocessing.BlendFunction.MULTIPLY,\n      samples: 21,\n      // May get away with less samples\n      rings: 4,\n      // Just make sure this isn't a multiple of samples\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.015,\n      // Controls sensitivity based on camera view distance **\n      rangeFalloff: 0.002,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      // Spread range\n      scale: 1.0,\n      // Controls intensity **\n      bias: 0.05\n    }, ao));\n    var bloomEffect = new postprocessing.BloomEffect(_extends({\n      opacity: 1,\n      blendFunction: postprocessing.BlendFunction.SCREEN,\n      kernelSize: postprocessing.KernelSize.VERY_LARGE,\n      luminanceThreshold: 0.9,\n      luminanceSmoothing: 0.07,\n      height: 600\n    }, bloom));\n    bloomEffect.blendMode.opacity.value = bloomOpacity;\n    var effectsArray = [];\n    if (effects) effectsArray = effects([smaaEffect, ssaoEffect, bloomEffect]);else {\n      if (smaa) effectsArray.push(smaaEffect);\n      if (ao) effectsArray.push(ssaoEffect);\n      if (bloom) effectsArray.push(bloomEffect);\n    }\n\n    var effectPass = _construct(postprocessing.EffectPass, [camera].concat(effectsArray));\n\n    effectPass.renderToScreen = true;\n    composer.addPass(normalPass);\n    composer.addPass(effectPass);\n    return composer;\n  }, [camera, gl, scene, smaa, ao, bloom, edgeDetection, bloomOpacity]);\n  React.useEffect(function () {\n    return void composer.setSize(size.width, size.height);\n  }, [composer, size]);\n  return reactThreeFiber.useFrame(function (_, delta) {\n    return composer.render(delta);\n  }, 1);\n}\n\nreactThreeFiber.extend({\n  TextMeshImpl: textmeshStandalone_umd.TextMesh\n});\nvar Text = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$anchorX = _ref.anchorX,\n      anchorX = _ref$anchorX === void 0 ? 'center' : _ref$anchorX,\n      _ref$anchorY = _ref.anchorY,\n      anchorY = _ref$anchorY === void 0 ? 'middle' : _ref$anchorY,\n      children = _ref.children,\n      props = _objectWithoutPropertiesLoose(_ref, [\"anchorX\", \"anchorY\", \"children\"]);\n\n  var textRef = React.useRef();\n\n  var _useState = React.useState(),\n      baseMtl = _useState[0],\n      setBaseMtl = _useState[1];\n\n  var _useMemo = React.useMemo(function () {\n    var n = [];\n    var t = '';\n    React.Children.forEach(children, function (child) {\n      if (typeof child === 'string') t += child;else if (child && typeof child === 'object' && child.props.attach === 'material') {\n        // Instantiate the base material and grab a reference to it, but don't assign any\n        // props, and assign it as the `material`, which Troika will replace behind the scenes.\n        n.push( /*#__PURE__*/React.createElement(child.type, {\n          ref: setBaseMtl,\n          attach: 'material'\n        })); // Once the base material has been assigned, grab the resulting upgraded material,\n        // and apply the original material props to that.\n\n        if (baseMtl) {\n          n.push( /*#__PURE__*/React__default.createElement(\"primitive\", _extends({\n            object: textRef.current.material\n          }, child.props, {\n            attach: null\n          })));\n        }\n      } else n.push(child);\n    });\n    return [n, t];\n  }, [children, baseMtl]),\n      nodes = _useMemo[0],\n      text = _useMemo[1];\n\n  React.useLayoutEffect(function () {\n    return void textRef.current.sync();\n  });\n  return /*#__PURE__*/React__default.createElement(\"textMeshImpl\", _extends({\n    ref: mergeRefs([textRef, ref]),\n    text: text,\n    anchorX: anchorX,\n    anchorY: anchorY\n  }, props), nodes);\n});\nvar v1 = new THREE.Vector3();\nvar v2 = new THREE.Vector3();\nvar v3 = new THREE.Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  var widthHalf = size.width / 2;\n  var heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  var deltaCamObj = objectPos.sub(cameraPos);\n  var camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof THREE.PerspectiveCamera) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var vFOV = camera.fov * Math.PI / 180;\n    var dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof THREE.OrthographicCamera) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof THREE.PerspectiveCamera || camera instanceof THREE.OrthographicCamera) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var dist = objectPos.distanceTo(cameraPos);\n    var A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    var B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nvar HTML = /*#__PURE__*/React__default.forwardRef(function (_ref, ref) {\n  var _portal$current;\n\n  var children = _ref.children,\n      _ref$eps = _ref.eps,\n      eps = _ref$eps === void 0 ? 0.001 : _ref$eps,\n      style = _ref.style,\n      className = _ref.className,\n      prepend = _ref.prepend,\n      center = _ref.center,\n      fullscreen = _ref.fullscreen,\n      portal = _ref.portal,\n      scaleFactor = _ref.scaleFactor,\n      _ref$zIndexRange = _ref.zIndexRange,\n      zIndexRange = _ref$zIndexRange === void 0 ? [16777271, 0] : _ref$zIndexRange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  var _useThree = reactThreeFiber.useThree(),\n      gl = _useThree.gl,\n      scene = _useThree.scene,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var _useState = React.useState(function () {\n    return document.createElement('div');\n  }),\n      el = _useState[0];\n\n  var group = React.useRef(null);\n  var old = React.useRef([0, 0]);\n  var target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  React.useEffect(function () {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      var vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return function () {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  var styles = React.useMemo(function () {\n    return _extends({\n      position: 'absolute',\n      transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n    }, fullscreen && {\n      top: -size.height / 2,\n      left: -size.width / 2,\n      width: size.width,\n      height: size.height\n    }, style);\n  }, [style, center, fullscreen, size]);\n  React.useEffect(function () {\n    return void ReactDOM.render( /*#__PURE__*/React__default.createElement(\"div\", {\n      ref: ref,\n      style: styles,\n      className: className,\n      children: children\n    }), el);\n  });\n  reactThreeFiber.useFrame(function () {\n    if (group.current) {\n      var vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        var scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React__default.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\nvar Shadow = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$fog = _ref.fog,\n      fog = _ref$fog === void 0 ? false : _ref$fog,\n      _ref$colorStop = _ref.colorStop,\n      colorStop = _ref$colorStop === void 0 ? 0.0 : _ref$colorStop,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'black' : _ref$color,\n      _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 0.5 : _ref$opacity,\n      props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n\n  var canvas = React.useMemo(function () {\n    var canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    var context = canvas.getContext('2d');\n    var gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new THREE.Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, stop]);\n  return /*#__PURE__*/React__default.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React__default.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React__default.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React__default.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\n\nfunction Stats(_ref) {\n  var _ref$showPanel = _ref.showPanel,\n      showPanel = _ref$showPanel === void 0 ? 0 : _ref$showPanel,\n      className = _ref.className;\n\n  var _useState = React.useState(function () {\n    return new StatsImpl();\n  }),\n      stats = _useState[0];\n\n  React.useEffect(function () {\n    stats.showPanel(showPanel);\n    document.body.appendChild(stats.dom);\n    if (className) stats.dom.classList.add(className);\n    return function () {\n      return document.body.removeChild(stats.dom);\n    };\n  }, []);\n  return reactThreeFiber.useFrame(function (state) {\n    stats.begin();\n    state.gl.render(state.scene, state.camera);\n    stats.end();\n  }, 1);\n}\n\nfunction WobbleMaterialImpl(parameters) {\n  var _this = this;\n\n  THREE.MeshStandardMaterial.call(this);\n  this.setValues(parameters);\n  this._time = {\n    value: 0\n  };\n  this._factor = {\n    value: 1\n  };\n\n  this.onBeforeCompile = function (shader) {\n    shader.uniforms.time = _this._time;\n    shader.uniforms.factor = _this._factor;\n    shader.vertexShader = 'uniform float time; uniform float factor;\\n' + shader.vertexShader;\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"float theta = sin( time + position.y ) / 2.0 * factor;\\n        float c = cos( theta );\\n        float s = sin( theta );\\n        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );\\n        vec3 transformed = vec3( position ) * m;\\n        vNormal = vNormal * m;\");\n  };\n\n  Object.defineProperty(this, 'time', {\n    get: function get() {\n      return _this._time;\n    },\n    set: function set(val) {\n      return _this._time.value = val;\n    }\n  });\n  Object.defineProperty(this, 'factor', {\n    get: function get() {\n      return _this._factor;\n    },\n    set: function set(val) {\n      return _this._factor.value = val;\n    }\n  });\n}\n\nWobbleMaterialImpl.prototype = Object.create(THREE.MeshStandardMaterial.prototype);\nWobbleMaterialImpl.prototype.constructor = THREE.MeshStandardMaterial;\nWobbleMaterialImpl.prototype.isMeshStandardMaterial = true;\nreactThreeFiber.extend({\n  WobbleMaterialImpl: WobbleMaterialImpl\n});\nvar MeshWobbleMaterial = /*#__PURE__*/React__default.forwardRef(function (_ref, ref) {\n  var _ref$speed = _ref.speed,\n      speed = _ref$speed === void 0 ? 1 : _ref$speed,\n      props = _objectWithoutPropertiesLoose(_ref, [\"speed\"]);\n\n  var material = React.useRef();\n  reactThreeFiber.useFrame(function (state) {\n    return material.current && (material.current.time = state.clock.getElapsedTime() * speed);\n  });\n  return /*#__PURE__*/React__default.createElement(\"wobbleMaterialImpl\", _extends({\n    ref: mergeRefs([ref, material]),\n    attach: \"material\"\n  }, props));\n});\nreactThreeFiber.extend({\n  SkyImpl: Sky$1.Sky\n});\nvar Sky = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 450000 : _ref$distance,\n      _ref$sunPosition = _ref.sunPosition,\n      sunPosition = _ref$sunPosition === void 0 ? [0, 1, 0] : _ref$sunPosition,\n      props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"sunPosition\"]);\n\n  var scale = React.useMemo(function () {\n    return new THREE.Vector3().setScalar(distance);\n  }, [distance]);\n  return /*#__PURE__*/React__default.createElement(\"skyImpl\", _extends({\n    ref: ref,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    scale: scale\n  }, props));\n});\nreactThreeFiber.extend({\n  Line2: Line2.Line2,\n  LineGeometry: LineGeometry.LineGeometry,\n  LineMaterial: LineMaterial.LineMaterial\n});\nvar Line = /*#__PURE__*/React__default.forwardRef(function Line(_ref, ref) {\n  var points = _ref.points,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'black' : _ref$color,\n      vertexColors = _ref.vertexColors,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"points\", \"color\", \"vertexColors\"]);\n\n  var lineRef = React.useRef();\n  var geomRef = React.useRef();\n  var resolution = React.useMemo(function () {\n    return new THREE.Vector2(512, 512);\n  }, []);\n  React.useEffect(function () {\n    if (!geomRef.current || !lineRef.current) return;\n    geomRef.current.setPositions(points.flat());\n    if (vertexColors) geomRef.current.setColors(vertexColors.flat());\n    lineRef.current.computeLineDistances();\n  }, [points, vertexColors]);\n  return /*#__PURE__*/React__default.createElement(\"line2\", _extends({\n    ref: mergeRefs([lineRef, ref])\n  }, rest), /*#__PURE__*/React__default.createElement(\"lineGeometry\", {\n    attach: \"geometry\",\n    ref: geomRef\n  }), /*#__PURE__*/React__default.createElement(\"lineMaterial\", _extends({\n    attach: \"material\",\n    color: color,\n    vertexColors: Boolean(vertexColors),\n    resolution: resolution\n  }, rest)));\n});\n\nvar StarfieldMaterial = /*#__PURE__*/function (_ShaderMaterial) {\n  _inheritsLoose(StarfieldMaterial, _ShaderMaterial);\n\n  function StarfieldMaterial() {\n    return _ShaderMaterial.call(this, {\n      uniforms: {\n        time: {\n          value: 0.0\n        },\n        fade: {\n          value: 1.0\n        }\n      },\n      vertexShader: \"uniform float time;\\n      attribute float size;\\n      varying vec3 vColor;\\n      void main() {\\n        vColor = color;\\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\\n        gl_Position = projectionMatrix * mvPosition;\\n      }\",\n      fragmentShader: \"uniform sampler2D pointTexture;\\n      uniform float fade;\\n      varying vec3 vColor;\\n      void main() {\\n        float opacity = 1.0;\\n        if (fade == 1.0) {\\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\\n        }\\n        gl_FragColor = vec4(vColor, opacity);\\n      }\"\n    }) || this;\n  }\n\n  return StarfieldMaterial;\n}(THREE.ShaderMaterial);\n\nreactThreeFiber.extend({\n  StarfieldMaterial: StarfieldMaterial\n});\n\nvar genStar = function genStar(r) {\n  return new THREE.Vector3().setFromSpherical(new THREE.Spherical(r, Math.acos(1 - Math.random() * 2), Math.random() * 2 * Math.PI));\n};\n\nvar Stars = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$radius = _ref.radius,\n      radius = _ref$radius === void 0 ? 100 : _ref$radius,\n      _ref$depth = _ref.depth,\n      depth = _ref$depth === void 0 ? 50 : _ref$depth,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 5000 : _ref$count,\n      _ref$saturation = _ref.saturation,\n      saturation = _ref$saturation === void 0 ? 0 : _ref$saturation,\n      _ref$factor = _ref.factor,\n      factor = _ref$factor === void 0 ? 4 : _ref$factor,\n      _ref$fade = _ref.fade,\n      fade = _ref$fade === void 0 ? false : _ref$fade;\n  var material = React.useRef();\n\n  var _useMemo = React.useMemo(function () {\n    var positions = [];\n    var colors = [];\n    var sizes = Array.from({\n      length: count\n    }, function () {\n      return (0.5 + 0.5 * Math.random()) * factor;\n    });\n    var color = new THREE.Color();\n    var r = radius + depth;\n    var increment = depth / count;\n\n    for (var i = 0; i < count; i++) {\n      r -= increment * Math.random();\n      positions.push.apply(positions, genStar(r).toArray());\n      color.setHSL(i / count, saturation, 0.9);\n      colors.push(color.r, color.g, color.b);\n    }\n\n    return [new Float32Array(positions), new Float32Array(colors), new Float32Array(sizes)];\n  }, []),\n      position = _useMemo[0],\n      color = _useMemo[1],\n      size = _useMemo[2];\n\n  reactThreeFiber.useFrame(function (state) {\n    return material.current && (material.current.uniforms.time.value = state.clock.getElapsedTime());\n  });\n  return /*#__PURE__*/React__default.createElement(\"points\", {\n    ref: ref\n  }, /*#__PURE__*/React__default.createElement(\"bufferGeometry\", {\n    attach: \"geometry\"\n  }, /*#__PURE__*/React__default.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'position'],\n    args: [position, 3]\n  }), /*#__PURE__*/React__default.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'color'],\n    args: [color, 3]\n  }), /*#__PURE__*/React__default.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'size'],\n    args: [size, 1]\n  })), /*#__PURE__*/React__default.createElement(\"starfieldMaterial\", {\n    ref: material,\n    attach: \"material\",\n    blending: THREE.AdditiveBlending,\n    \"uniforms-fade-value\": fade,\n    transparent: true,\n    vertexColors: true\n  }));\n});\n\nfunction draco(url) {\n  if (url === void 0) {\n    url = '/draco-gltf/';\n  }\n\n  return function (loader) {\n    var dracoLoader = new DRACOLoader.DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\n\nvar pcss = function pcss(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$frustrum = _ref.frustrum,\n      frustrum = _ref$frustrum === void 0 ? 3.75 : _ref$frustrum,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 0.005 : _ref$size,\n      _ref$near = _ref.near,\n      near = _ref$near === void 0 ? 9.5 : _ref$near,\n      _ref$samples = _ref.samples,\n      samples = _ref$samples === void 0 ? 17 : _ref$samples,\n      _ref$rings = _ref.rings,\n      rings = _ref$rings === void 0 ? 11 : _ref$rings;\n\n  return \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n};\n\nvar softShadows = function softShadows(props) {\n  var shader = THREE.ShaderChunk.shadowmap_pars_fragment;\n  shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n  shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n  THREE.ShaderChunk.shadowmap_pars_fragment = shader;\n};\n\nvar _inverseMatrix = new THREE.Matrix4();\n\nvar _ray = new THREE.Ray();\n\nvar _sphere = new THREE.Sphere();\n\nvar _vA = new THREE.Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  var geometry = this.geometry;\n  var material = this.material;\n  var matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.getInverse(matrixWorld);\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nfunction useCamera(camera, props) {\n  var _useThree = reactThreeFiber.useThree(),\n      mouse = _useThree.mouse;\n\n  var _useState = React.useState(function () {\n    var raycaster = new THREE.Raycaster();\n    if (props) reactThreeFiber.applyProps(raycaster, props, {});\n    return function (_, intersects) {\n      raycaster.setFromCamera(mouse, camera instanceof THREE.Camera ? camera : camera.current);\n      var rc = this.constructor.prototype.raycast.bind(this);\n      if (rc) rc(raycaster, intersects);\n    };\n  }),\n      raycast = _useState[0];\n\n  return raycast;\n}\n\nfunction useHelper(object3D, proto) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var helper = React__default.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      scene = _useThree.scene;\n\n  React.useEffect(function () {\n    if (proto && object3D.current) {\n      helper.current = _construct(proto, [object3D.current].concat(args));\n\n      if (helper.current) {\n        scene.add(helper.current);\n      }\n    }\n\n    return function () {\n      if (helper.current) {\n        scene.remove(helper.current);\n      }\n    };\n  }, [scene, proto, object3D, args]);\n  reactThreeFiber.useFrame(function () {\n    if (helper.current) {\n      helper.current.update();\n    }\n  });\n  return helper;\n}\n\nfunction useAspect(type, width, height, factor) {\n  if (factor === void 0) {\n    factor = 1;\n  }\n\n  var _useThree = reactThreeFiber.useThree(),\n      v = _useThree.viewport,\n      aspect = _useThree.aspect;\n\n  var adaptedHeight = height * (aspect > width / height ? v.width / width : v.height / height);\n  var adaptedWidth = width * (aspect > width / height ? v.width / width : v.height / height);\n  return [adaptedWidth * factor, adaptedHeight * factor, 1];\n}\n\nfunction create(type) {\n  var El = type + 'BufferGeometry';\n  return /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n    var args = _ref.args,\n        children = _ref.children,\n        props = _objectWithoutPropertiesLoose(_ref, [\"args\", \"children\"]);\n\n    return /*#__PURE__*/React__default.createElement(\"mesh\", _extends({\n      ref: ref\n    }, props), /*#__PURE__*/React__default.createElement(El, {\n      attach: \"geometry\",\n      args: args\n    }), children);\n  });\n}\n\nvar Box = create('box');\nvar Circle = create('circle');\nvar Cone = create('cone');\nvar Cylinder = create('cylinder');\nvar Sphere = create('sphere');\nvar Plane = create('plane');\nvar Tube = create('tube');\nvar Torus = create('torus');\nvar TorusKnot = create('torusKnot');\nvar Tetrahedron = create('tetrahedron');\nvar Ring = create('ring');\nvar Polyhedron = create('polyhedron');\nvar Icosahedron = create('icosahedron');\nvar Octahedron = create('octahedron');\nvar Dodecahedron = create('dodecahedron');\nvar Extrude = create('extrude');\nvar Lathe = create('lathe');\nvar Parametric = create('parametric');\nexports.Box = Box;\nexports.Circle = Circle;\nexports.Cone = Cone;\nexports.Cylinder = Cylinder;\nexports.Detailed = Detailed;\nexports.Dodecahedron = Dodecahedron;\nexports.Extrude = Extrude;\nexports.HTML = HTML;\nexports.Icosahedron = Icosahedron;\nexports.Lathe = Lathe;\nexports.Line = Line;\nexports.MapControls = MapControls;\nexports.MeshWobbleMaterial = MeshWobbleMaterial;\nexports.Octahedron = Octahedron;\nexports.OrbitControls = OrbitControls;\nexports.OrthographicCamera = OrthographicCamera;\nexports.Parametric = Parametric;\nexports.PerspectiveCamera = PerspectiveCamera;\nexports.Plane = Plane;\nexports.Polyhedron = Polyhedron;\nexports.PositionalAudio = PositionalAudio;\nexports.Ring = Ring;\nexports.Shadow = Shadow;\nexports.Sky = Sky;\nexports.Sphere = Sphere;\nexports.StandardEffects = StandardEffects;\nexports.Stars = Stars;\nexports.Stats = Stats;\nexports.Tetrahedron = Tetrahedron;\nexports.Text = Text;\nexports.Torus = Torus;\nexports.TorusKnot = TorusKnot;\nexports.TrackballControls = TrackballControls;\nexports.TransformControls = TransformControls;\nexports.Tube = Tube;\nexports.draco = draco;\nexports.meshBounds = meshBounds;\nexports.softShadows = softShadows;\nexports.useAspect = useAspect;\nexports.useCamera = useCamera;\nexports.useHelper = useHelper;","map":{"version":3,"sources":["/Users/kirill/Desktop/DESIGN3D/node_modules/drei/dist/index.cjs.js"],"names":["Object","defineProperty","exports","value","_interopDefault","ex","_extends","require","React","React__default","reactThreeFiber","OrbitControls$1","mergeRefs","TrackballControls$1","_objectWithoutPropertiesLoose","TransformControls$1","pick","omit","THREE","_construct","postprocessing","textmeshStandalone_umd","ReactDOM","StatsImpl","Sky$1","LineGeometry","LineMaterial","Line2","_inheritsLoose","DRACOLoader","extend","OrbitControlsImpl","OrbitControls","forwardRef","props","ref","enableDamping","controls","useRef","_useThree","useThree","camera","gl","invalidate","useFrame","_controls$current","current","update","useEffect","_controls$current2","addEventListener","_controls$current3","removeEventListener","createElement","args","domElement","MapControlsImpl","MapControls","TrackballControlsImpl","TrackballControls","TransformControlsImpl","TransformControls","_ref","children","transformOnlyPropNames","transformProps","objectProps","group","useLayoutEffect","attach","Fragment","Detailed","distances","lod","useUpdate","levels","length","forEach","object","index","push","distance","state","_lod$current","PositionalAudio","url","_ref$distance","_ref$loop","loop","sound","_useState","useState","AudioListener","listener","buffer","useLoader","AudioLoader","_sound$current","_sound$current2","_sound$current3","_sound$current4","setBuffer","setRefDistance","setLoop","play","add","remove","PerspectiveCamera","_ref$makeDefault","makeDefault","setDefaultCamera","size","cameraRef","cam","aspect","width","height","updateProjectionMatrix","oldCam","OrthographicCamera","left","right","top","bottom","StandardEffects","_ref$smaa","smaa","_ref$ao","ao","_ref$bloom","bloom","_ref$edgeDetection","edgeDetection","_ref$bloomOpacity","bloomOpacity","effects","scene","smaaProps","SMAAImageLoader","composer","useMemo","EffectComposer","frameBufferType","HalfFloatType","addPass","RenderPass","smaaEffect","SMAAEffect","colorEdgesMaterial","setEdgeDetectionThreshold","normalPass","NormalPass","ssaoEffect","SSAOEffect","renderTarget","texture","blendFunction","BlendFunction","MULTIPLY","samples","rings","distanceThreshold","distanceFalloff","rangeThreshold","rangeFalloff","luminanceInfluence","radius","scale","bias","bloomEffect","BloomEffect","opacity","SCREEN","kernelSize","KernelSize","VERY_LARGE","luminanceThreshold","luminanceSmoothing","blendMode","effectsArray","effectPass","EffectPass","concat","renderToScreen","setSize","_","delta","render","TextMeshImpl","TextMesh","Text","_ref$anchorX","anchorX","_ref$anchorY","anchorY","textRef","baseMtl","setBaseMtl","_useMemo","n","t","Children","child","type","material","nodes","text","sync","v1","Vector3","v2","v3","calculatePosition","el","objectPos","setFromMatrixPosition","matrixWorld","project","widthHalf","heightHalf","x","y","isObjectBehindCamera","cameraPos","deltaCamObj","sub","camDir","getWorldDirection","angleTo","Math","PI","objectScale","vFOV","fov","dist","distanceTo","tan","zoom","objectZIndex","zIndexRange","A","far","near","B","round","undefined","HTML","_portal$current","_ref$eps","eps","style","className","prepend","center","fullscreen","portal","scaleFactor","_ref$zIndexRange","document","old","target","parentNode","updateMatrixWorld","vec","cssText","appendChild","removeChild","unmountComponentAtNode","styles","position","transform","abs","display","zIndex","Shadow","_ref$fog","fog","_ref$colorStop","colorStop","_ref$color","color","_ref$opacity","canvas","context","getContext","gradient","createRadialGradient","addColorStop","Color","getStyle","fillStyle","fillRect","stop","transparent","Stats","_ref$showPanel","showPanel","stats","body","dom","classList","begin","end","WobbleMaterialImpl","parameters","_this","MeshStandardMaterial","call","setValues","_time","_factor","onBeforeCompile","shader","uniforms","time","factor","vertexShader","replace","get","set","val","prototype","create","constructor","isMeshStandardMaterial","MeshWobbleMaterial","_ref$speed","speed","clock","getElapsedTime","SkyImpl","Sky","_ref$sunPosition","sunPosition","setScalar","Line","points","vertexColors","rest","lineRef","geomRef","resolution","Vector2","setPositions","flat","setColors","computeLineDistances","Boolean","StarfieldMaterial","_ShaderMaterial","fade","fragmentShader","ShaderMaterial","genStar","r","setFromSpherical","Spherical","acos","random","Stars","_ref$radius","_ref$depth","depth","_ref$count","count","_ref$saturation","saturation","_ref$factor","_ref$fade","positions","colors","sizes","Array","from","increment","i","apply","toArray","setHSL","g","b","Float32Array","attachObject","blending","AdditiveBlending","draco","loader","dracoLoader","setDecoderPath","setDRACOLoader","pcss","_temp","_ref$frustrum","frustrum","_ref$size","_ref$near","_ref$samples","_ref$rings","softShadows","ShaderChunk","shadowmap_pars_fragment","_inverseMatrix","Matrix4","_ray","Ray","_sphere","Sphere","_vA","meshBounds","raycaster","intersects","geometry","boundingSphere","computeBoundingSphere","copy","applyMatrix4","ray","intersectsSphere","getInverse","boundingBox","intersectBox","origin","point","clone","useCamera","mouse","Raycaster","applyProps","setFromCamera","Camera","rc","raycast","bind","useHelper","object3D","proto","_len","arguments","_key","helper","useAspect","v","viewport","adaptedHeight","adaptedWidth","El","Box","Circle","Cone","Cylinder","Plane","Tube","Torus","TorusKnot","Tetrahedron","Ring","Polyhedron","Icosahedron","Octahedron","Dodecahedron","Extrude","Lathe","Parametric"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar _extends = _interopDefault(require('@babel/runtime/helpers/extends'));\nvar React = require('react');\nvar React__default = _interopDefault(React);\nvar reactThreeFiber = require('react-three-fiber');\nvar OrbitControls$1 = require('three/examples/jsm/controls/OrbitControls');\nvar mergeRefs = _interopDefault(require('react-merge-refs'));\nvar TrackballControls$1 = require('three/examples/jsm/controls/TrackballControls');\nvar _objectWithoutPropertiesLoose = _interopDefault(require('@babel/runtime/helpers/objectWithoutPropertiesLoose'));\nvar TransformControls$1 = require('three/examples/jsm/controls/TransformControls');\nvar pick = _interopDefault(require('lodash.pick'));\nvar omit = _interopDefault(require('lodash.omit'));\nvar THREE = require('three');\nvar _construct = _interopDefault(require('@babel/runtime/helpers/construct'));\nvar postprocessing = require('postprocessing');\nvar textmeshStandalone_umd = require('troika-3d-text/dist/textmesh-standalone.umd');\nvar ReactDOM = _interopDefault(require('react-dom'));\nvar StatsImpl = _interopDefault(require('stats.js'));\nvar Sky$1 = require('three/examples/jsm/objects/Sky');\nvar LineGeometry = require('three/examples/jsm/lines/LineGeometry');\nvar LineMaterial = require('three/examples/jsm/lines/LineMaterial');\nvar Line2 = require('three/examples/jsm/lines/Line2');\nvar _inheritsLoose = _interopDefault(require('@babel/runtime/helpers/inheritsLoose'));\nvar DRACOLoader = require('three/examples/jsm/loaders/DRACOLoader');\n\nreactThreeFiber.extend({\n  OrbitControlsImpl: OrbitControls$1.OrbitControls\n});\nvar OrbitControls = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  if (props === void 0) {\n    props = {\n      enableDamping: true\n    };\n  }\n\n  var controls = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  reactThreeFiber.useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  React.useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React__default.createElement(\"orbitControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\n\nreactThreeFiber.extend({\n  MapControlsImpl: OrbitControls$1.MapControls\n});\nvar MapControls = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  if (props === void 0) {\n    props = {\n      enableDamping: true\n    };\n  }\n\n  var controls = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  reactThreeFiber.useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  React.useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React__default.createElement(\"mapControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\n\nreactThreeFiber.extend({\n  TrackballControlsImpl: TrackballControls$1.TrackballControls\n});\nvar TrackballControls = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var controls = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  reactThreeFiber.useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  React.useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React__default.createElement(\"trackballControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\n\nreactThreeFiber.extend({\n  TransformControlsImpl: TransformControls$1.TransformControls\n});\nvar TransformControls = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  var transformOnlyPropNames = ['enabled', 'axis', 'mode', 'translationSnap', 'rotationSnap', 'scaleSnap', 'space', 'size', 'dragging', 'showX', 'showY', 'showZ'];\n  var transformProps = pick(props, transformOnlyPropNames);\n  var objectProps = omit(props, transformOnlyPropNames);\n  var controls = React.useRef();\n  var group = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  React.useLayoutEffect(function () {\n    var _controls$current;\n\n    return void ((_controls$current = controls.current) == null ? void 0 : _controls$current.attach(group.current));\n  }, [children]);\n  React.useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(\"transformControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, transformProps)), /*#__PURE__*/React__default.createElement(\"group\", _extends({\n    ref: group\n  }, objectProps), children));\n});\n\nvar Detailed = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      distances = _ref.distances,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n\n  var lod = reactThreeFiber.useUpdate(function (lod) {\n    lod.levels.length = 0;\n    lod.children.forEach(function (object, index) {\n      return lod.levels.push({\n        object: object,\n        distance: distances[index]\n      });\n    });\n  }, []);\n  reactThreeFiber.useFrame(function (state) {\n    var _lod$current;\n\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React__default.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\n\nvar PositionalAudio = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var url = _ref.url,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 1 : _ref$distance,\n      _ref$loop = _ref.loop,\n      loop = _ref$loop === void 0 ? true : _ref$loop,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  var sound = React.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      camera = _useThree.camera;\n\n  var _useState = React.useState(function () {\n    return new THREE.AudioListener();\n  }),\n      listener = _useState[0];\n\n  var buffer = reactThreeFiber.useLoader(THREE.AudioLoader, url);\n  React.useEffect(function () {\n    var _sound$current, _sound$current2, _sound$current3, _sound$current4;\n\n    (_sound$current = sound.current) == null ? void 0 : _sound$current.setBuffer(buffer);\n    (_sound$current2 = sound.current) == null ? void 0 : _sound$current2.setRefDistance(distance);\n    (_sound$current3 = sound.current) == null ? void 0 : _sound$current3.setLoop(loop);\n    (_sound$current4 = sound.current) == null ? void 0 : _sound$current4.play();\n    camera.add(listener);\n    return function () {\n      return void camera.remove(listener);\n    };\n  }, []);\n  return /*#__PURE__*/React__default.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\n\nvar PerspectiveCamera = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$makeDefault = _ref.makeDefault,\n      makeDefault = _ref$makeDefault === void 0 ? false : _ref$makeDefault,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  var _useThree = reactThreeFiber.useThree(),\n      setDefaultCamera = _useThree.setDefaultCamera,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var cameraRef = reactThreeFiber.useUpdate(function (cam) {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  React.useLayoutEffect(function () {\n    if (makeDefault) {\n      var oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return function () {\n        return setDefaultCamera(oldCam);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React__default.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nvar OrthographicCamera = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$makeDefault = _ref.makeDefault,\n      makeDefault = _ref$makeDefault === void 0 ? false : _ref$makeDefault,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  var _useThree = reactThreeFiber.useThree(),\n      setDefaultCamera = _useThree.setDefaultCamera,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var cameraRef = reactThreeFiber.useUpdate(function (cam) {\n    return cam.updateProjectionMatrix();\n  }, [size, props]);\n  React.useLayoutEffect(function () {\n    if (makeDefault) {\n      var oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return function () {\n        return setDefaultCamera(oldCam);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React__default.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nfunction StandardEffects(_ref) {\n  var _ref$smaa = _ref.smaa,\n      smaa = _ref$smaa === void 0 ? true : _ref$smaa,\n      _ref$ao = _ref.ao,\n      ao = _ref$ao === void 0 ? true : _ref$ao,\n      _ref$bloom = _ref.bloom,\n      bloom = _ref$bloom === void 0 ? true : _ref$bloom,\n      _ref$edgeDetection = _ref.edgeDetection,\n      edgeDetection = _ref$edgeDetection === void 0 ? 0.1 : _ref$edgeDetection,\n      _ref$bloomOpacity = _ref.bloomOpacity,\n      bloomOpacity = _ref$bloomOpacity === void 0 ? 1 : _ref$bloomOpacity,\n      effects = _ref.effects;\n\n  var _useThree = reactThreeFiber.useThree(),\n      gl = _useThree.gl,\n      scene = _useThree.scene,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var smaaProps = reactThreeFiber.useLoader(postprocessing.SMAAImageLoader, '');\n  var composer = React.useMemo(function () {\n    var composer = new postprocessing.EffectComposer(gl, {\n      frameBufferType: THREE.HalfFloatType\n    });\n    composer.addPass(new postprocessing.RenderPass(scene, camera));\n\n    var smaaEffect = _construct(postprocessing.SMAAEffect, smaaProps);\n\n    smaaEffect.colorEdgesMaterial.setEdgeDetectionThreshold(edgeDetection);\n    var normalPass = new postprocessing.NormalPass(scene, camera);\n    var ssaoEffect = new postprocessing.SSAOEffect(camera, normalPass.renderTarget.texture, _extends({\n      blendFunction: postprocessing.BlendFunction.MULTIPLY,\n      samples: 21,\n      // May get away with less samples\n      rings: 4,\n      // Just make sure this isn't a multiple of samples\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.015,\n      // Controls sensitivity based on camera view distance **\n      rangeFalloff: 0.002,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      // Spread range\n      scale: 1.0,\n      // Controls intensity **\n      bias: 0.05\n    }, ao));\n    var bloomEffect = new postprocessing.BloomEffect(_extends({\n      opacity: 1,\n      blendFunction: postprocessing.BlendFunction.SCREEN,\n      kernelSize: postprocessing.KernelSize.VERY_LARGE,\n      luminanceThreshold: 0.9,\n      luminanceSmoothing: 0.07,\n      height: 600\n    }, bloom));\n    bloomEffect.blendMode.opacity.value = bloomOpacity;\n    var effectsArray = [];\n    if (effects) effectsArray = effects([smaaEffect, ssaoEffect, bloomEffect]);else {\n      if (smaa) effectsArray.push(smaaEffect);\n      if (ao) effectsArray.push(ssaoEffect);\n      if (bloom) effectsArray.push(bloomEffect);\n    }\n\n    var effectPass = _construct(postprocessing.EffectPass, [camera].concat(effectsArray));\n\n    effectPass.renderToScreen = true;\n    composer.addPass(normalPass);\n    composer.addPass(effectPass);\n    return composer;\n  }, [camera, gl, scene, smaa, ao, bloom, edgeDetection, bloomOpacity]);\n  React.useEffect(function () {\n    return void composer.setSize(size.width, size.height);\n  }, [composer, size]);\n  return reactThreeFiber.useFrame(function (_, delta) {\n    return composer.render(delta);\n  }, 1);\n}\n\nreactThreeFiber.extend({\n  TextMeshImpl: textmeshStandalone_umd.TextMesh\n});\nvar Text = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$anchorX = _ref.anchorX,\n      anchorX = _ref$anchorX === void 0 ? 'center' : _ref$anchorX,\n      _ref$anchorY = _ref.anchorY,\n      anchorY = _ref$anchorY === void 0 ? 'middle' : _ref$anchorY,\n      children = _ref.children,\n      props = _objectWithoutPropertiesLoose(_ref, [\"anchorX\", \"anchorY\", \"children\"]);\n\n  var textRef = React.useRef();\n\n  var _useState = React.useState(),\n      baseMtl = _useState[0],\n      setBaseMtl = _useState[1];\n\n  var _useMemo = React.useMemo(function () {\n    var n = [];\n    var t = '';\n    React.Children.forEach(children, function (child) {\n      if (typeof child === 'string') t += child;else if (child && typeof child === 'object' && child.props.attach === 'material') {\n        // Instantiate the base material and grab a reference to it, but don't assign any\n        // props, and assign it as the `material`, which Troika will replace behind the scenes.\n        n.push( /*#__PURE__*/React.createElement(child.type, {\n          ref: setBaseMtl,\n          attach: 'material'\n        })); // Once the base material has been assigned, grab the resulting upgraded material,\n        // and apply the original material props to that.\n\n        if (baseMtl) {\n          n.push( /*#__PURE__*/React__default.createElement(\"primitive\", _extends({\n            object: textRef.current.material\n          }, child.props, {\n            attach: null\n          })));\n        }\n      } else n.push(child);\n    });\n    return [n, t];\n  }, [children, baseMtl]),\n      nodes = _useMemo[0],\n      text = _useMemo[1];\n\n  React.useLayoutEffect(function () {\n    return void textRef.current.sync();\n  });\n  return /*#__PURE__*/React__default.createElement(\"textMeshImpl\", _extends({\n    ref: mergeRefs([textRef, ref]),\n    text: text,\n    anchorX: anchorX,\n    anchorY: anchorY\n  }, props), nodes);\n});\n\nvar v1 = new THREE.Vector3();\nvar v2 = new THREE.Vector3();\nvar v3 = new THREE.Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  var widthHalf = size.width / 2;\n  var heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  var deltaCamObj = objectPos.sub(cameraPos);\n  var camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof THREE.PerspectiveCamera) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var vFOV = camera.fov * Math.PI / 180;\n    var dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof THREE.OrthographicCamera) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof THREE.PerspectiveCamera || camera instanceof THREE.OrthographicCamera) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var dist = objectPos.distanceTo(cameraPos);\n    var A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    var B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nvar HTML = /*#__PURE__*/React__default.forwardRef(function (_ref, ref) {\n  var _portal$current;\n\n  var children = _ref.children,\n      _ref$eps = _ref.eps,\n      eps = _ref$eps === void 0 ? 0.001 : _ref$eps,\n      style = _ref.style,\n      className = _ref.className,\n      prepend = _ref.prepend,\n      center = _ref.center,\n      fullscreen = _ref.fullscreen,\n      portal = _ref.portal,\n      scaleFactor = _ref.scaleFactor,\n      _ref$zIndexRange = _ref.zIndexRange,\n      zIndexRange = _ref$zIndexRange === void 0 ? [16777271, 0] : _ref$zIndexRange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  var _useThree = reactThreeFiber.useThree(),\n      gl = _useThree.gl,\n      scene = _useThree.scene,\n      camera = _useThree.camera,\n      size = _useThree.size;\n\n  var _useState = React.useState(function () {\n    return document.createElement('div');\n  }),\n      el = _useState[0];\n\n  var group = React.useRef(null);\n  var old = React.useRef([0, 0]);\n  var target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  React.useEffect(function () {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      var vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return function () {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  var styles = React.useMemo(function () {\n    return _extends({\n      position: 'absolute',\n      transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n    }, fullscreen && {\n      top: -size.height / 2,\n      left: -size.width / 2,\n      width: size.width,\n      height: size.height\n    }, style);\n  }, [style, center, fullscreen, size]);\n  React.useEffect(function () {\n    return void ReactDOM.render( /*#__PURE__*/React__default.createElement(\"div\", {\n      ref: ref,\n      style: styles,\n      className: className,\n      children: children\n    }), el);\n  });\n  reactThreeFiber.useFrame(function () {\n    if (group.current) {\n      var vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        var scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React__default.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\n\nvar Shadow = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$fog = _ref.fog,\n      fog = _ref$fog === void 0 ? false : _ref$fog,\n      _ref$colorStop = _ref.colorStop,\n      colorStop = _ref$colorStop === void 0 ? 0.0 : _ref$colorStop,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'black' : _ref$color,\n      _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 0.5 : _ref$opacity,\n      props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n\n  var canvas = React.useMemo(function () {\n    var canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    var context = canvas.getContext('2d');\n    var gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new THREE.Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, stop]);\n  return /*#__PURE__*/React__default.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React__default.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React__default.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React__default.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\n\nfunction Stats(_ref) {\n  var _ref$showPanel = _ref.showPanel,\n      showPanel = _ref$showPanel === void 0 ? 0 : _ref$showPanel,\n      className = _ref.className;\n\n  var _useState = React.useState(function () {\n    return new StatsImpl();\n  }),\n      stats = _useState[0];\n\n  React.useEffect(function () {\n    stats.showPanel(showPanel);\n    document.body.appendChild(stats.dom);\n    if (className) stats.dom.classList.add(className);\n    return function () {\n      return document.body.removeChild(stats.dom);\n    };\n  }, []);\n  return reactThreeFiber.useFrame(function (state) {\n    stats.begin();\n    state.gl.render(state.scene, state.camera);\n    stats.end();\n  }, 1);\n}\n\nfunction WobbleMaterialImpl(parameters) {\n  var _this = this;\n\n  THREE.MeshStandardMaterial.call(this);\n  this.setValues(parameters);\n  this._time = {\n    value: 0\n  };\n  this._factor = {\n    value: 1\n  };\n\n  this.onBeforeCompile = function (shader) {\n    shader.uniforms.time = _this._time;\n    shader.uniforms.factor = _this._factor;\n    shader.vertexShader = 'uniform float time; uniform float factor;\\n' + shader.vertexShader;\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"float theta = sin( time + position.y ) / 2.0 * factor;\\n        float c = cos( theta );\\n        float s = sin( theta );\\n        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );\\n        vec3 transformed = vec3( position ) * m;\\n        vNormal = vNormal * m;\");\n  };\n\n  Object.defineProperty(this, 'time', {\n    get: function get() {\n      return _this._time;\n    },\n    set: function set(val) {\n      return _this._time.value = val;\n    }\n  });\n  Object.defineProperty(this, 'factor', {\n    get: function get() {\n      return _this._factor;\n    },\n    set: function set(val) {\n      return _this._factor.value = val;\n    }\n  });\n}\n\nWobbleMaterialImpl.prototype = Object.create(THREE.MeshStandardMaterial.prototype);\nWobbleMaterialImpl.prototype.constructor = THREE.MeshStandardMaterial;\nWobbleMaterialImpl.prototype.isMeshStandardMaterial = true;\nreactThreeFiber.extend({\n  WobbleMaterialImpl: WobbleMaterialImpl\n});\nvar MeshWobbleMaterial = /*#__PURE__*/React__default.forwardRef(function (_ref, ref) {\n  var _ref$speed = _ref.speed,\n      speed = _ref$speed === void 0 ? 1 : _ref$speed,\n      props = _objectWithoutPropertiesLoose(_ref, [\"speed\"]);\n\n  var material = React.useRef();\n  reactThreeFiber.useFrame(function (state) {\n    return material.current && (material.current.time = state.clock.getElapsedTime() * speed);\n  });\n  return /*#__PURE__*/React__default.createElement(\"wobbleMaterialImpl\", _extends({\n    ref: mergeRefs([ref, material]),\n    attach: \"material\"\n  }, props));\n});\n\nreactThreeFiber.extend({\n  SkyImpl: Sky$1.Sky\n});\nvar Sky = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 450000 : _ref$distance,\n      _ref$sunPosition = _ref.sunPosition,\n      sunPosition = _ref$sunPosition === void 0 ? [0, 1, 0] : _ref$sunPosition,\n      props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"sunPosition\"]);\n\n  var scale = React.useMemo(function () {\n    return new THREE.Vector3().setScalar(distance);\n  }, [distance]);\n  return /*#__PURE__*/React__default.createElement(\"skyImpl\", _extends({\n    ref: ref,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    scale: scale\n  }, props));\n});\n\nreactThreeFiber.extend({\n  Line2: Line2.Line2,\n  LineGeometry: LineGeometry.LineGeometry,\n  LineMaterial: LineMaterial.LineMaterial\n});\nvar Line = /*#__PURE__*/React__default.forwardRef(function Line(_ref, ref) {\n  var points = _ref.points,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'black' : _ref$color,\n      vertexColors = _ref.vertexColors,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"points\", \"color\", \"vertexColors\"]);\n\n  var lineRef = React.useRef();\n  var geomRef = React.useRef();\n  var resolution = React.useMemo(function () {\n    return new THREE.Vector2(512, 512);\n  }, []);\n  React.useEffect(function () {\n    if (!geomRef.current || !lineRef.current) return;\n    geomRef.current.setPositions(points.flat());\n    if (vertexColors) geomRef.current.setColors(vertexColors.flat());\n    lineRef.current.computeLineDistances();\n  }, [points, vertexColors]);\n  return /*#__PURE__*/React__default.createElement(\"line2\", _extends({\n    ref: mergeRefs([lineRef, ref])\n  }, rest), /*#__PURE__*/React__default.createElement(\"lineGeometry\", {\n    attach: \"geometry\",\n    ref: geomRef\n  }), /*#__PURE__*/React__default.createElement(\"lineMaterial\", _extends({\n    attach: \"material\",\n    color: color,\n    vertexColors: Boolean(vertexColors),\n    resolution: resolution\n  }, rest)));\n});\n\nvar StarfieldMaterial = /*#__PURE__*/function (_ShaderMaterial) {\n  _inheritsLoose(StarfieldMaterial, _ShaderMaterial);\n\n  function StarfieldMaterial() {\n    return _ShaderMaterial.call(this, {\n      uniforms: {\n        time: {\n          value: 0.0\n        },\n        fade: {\n          value: 1.0\n        }\n      },\n      vertexShader: \"uniform float time;\\n      attribute float size;\\n      varying vec3 vColor;\\n      void main() {\\n        vColor = color;\\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\\n        gl_Position = projectionMatrix * mvPosition;\\n      }\",\n      fragmentShader: \"uniform sampler2D pointTexture;\\n      uniform float fade;\\n      varying vec3 vColor;\\n      void main() {\\n        float opacity = 1.0;\\n        if (fade == 1.0) {\\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\\n        }\\n        gl_FragColor = vec4(vColor, opacity);\\n      }\"\n    }) || this;\n  }\n\n  return StarfieldMaterial;\n}(THREE.ShaderMaterial);\n\nreactThreeFiber.extend({\n  StarfieldMaterial: StarfieldMaterial\n});\n\nvar genStar = function genStar(r) {\n  return new THREE.Vector3().setFromSpherical(new THREE.Spherical(r, Math.acos(1 - Math.random() * 2), Math.random() * 2 * Math.PI));\n};\n\nvar Stars = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$radius = _ref.radius,\n      radius = _ref$radius === void 0 ? 100 : _ref$radius,\n      _ref$depth = _ref.depth,\n      depth = _ref$depth === void 0 ? 50 : _ref$depth,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 5000 : _ref$count,\n      _ref$saturation = _ref.saturation,\n      saturation = _ref$saturation === void 0 ? 0 : _ref$saturation,\n      _ref$factor = _ref.factor,\n      factor = _ref$factor === void 0 ? 4 : _ref$factor,\n      _ref$fade = _ref.fade,\n      fade = _ref$fade === void 0 ? false : _ref$fade;\n  var material = React.useRef();\n\n  var _useMemo = React.useMemo(function () {\n    var positions = [];\n    var colors = [];\n    var sizes = Array.from({\n      length: count\n    }, function () {\n      return (0.5 + 0.5 * Math.random()) * factor;\n    });\n    var color = new THREE.Color();\n    var r = radius + depth;\n    var increment = depth / count;\n\n    for (var i = 0; i < count; i++) {\n      r -= increment * Math.random();\n      positions.push.apply(positions, genStar(r).toArray());\n      color.setHSL(i / count, saturation, 0.9);\n      colors.push(color.r, color.g, color.b);\n    }\n\n    return [new Float32Array(positions), new Float32Array(colors), new Float32Array(sizes)];\n  }, []),\n      position = _useMemo[0],\n      color = _useMemo[1],\n      size = _useMemo[2];\n\n  reactThreeFiber.useFrame(function (state) {\n    return material.current && (material.current.uniforms.time.value = state.clock.getElapsedTime());\n  });\n  return /*#__PURE__*/React__default.createElement(\"points\", {\n    ref: ref\n  }, /*#__PURE__*/React__default.createElement(\"bufferGeometry\", {\n    attach: \"geometry\"\n  }, /*#__PURE__*/React__default.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'position'],\n    args: [position, 3]\n  }), /*#__PURE__*/React__default.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'color'],\n    args: [color, 3]\n  }), /*#__PURE__*/React__default.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'size'],\n    args: [size, 1]\n  })), /*#__PURE__*/React__default.createElement(\"starfieldMaterial\", {\n    ref: material,\n    attach: \"material\",\n    blending: THREE.AdditiveBlending,\n    \"uniforms-fade-value\": fade,\n    transparent: true,\n    vertexColors: true\n  }));\n});\n\nfunction draco(url) {\n  if (url === void 0) {\n    url = '/draco-gltf/';\n  }\n\n  return function (loader) {\n    var dracoLoader = new DRACOLoader.DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\n\nvar pcss = function pcss(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$frustrum = _ref.frustrum,\n      frustrum = _ref$frustrum === void 0 ? 3.75 : _ref$frustrum,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 0.005 : _ref$size,\n      _ref$near = _ref.near,\n      near = _ref$near === void 0 ? 9.5 : _ref$near,\n      _ref$samples = _ref.samples,\n      samples = _ref$samples === void 0 ? 17 : _ref$samples,\n      _ref$rings = _ref.rings,\n      rings = _ref$rings === void 0 ? 11 : _ref$rings;\n\n  return \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n};\n\nvar softShadows = function softShadows(props) {\n  var shader = THREE.ShaderChunk.shadowmap_pars_fragment;\n  shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n  shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n  THREE.ShaderChunk.shadowmap_pars_fragment = shader;\n};\n\nvar _inverseMatrix = new THREE.Matrix4();\n\nvar _ray = new THREE.Ray();\n\nvar _sphere = new THREE.Sphere();\n\nvar _vA = new THREE.Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  var geometry = this.geometry;\n  var material = this.material;\n  var matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.getInverse(matrixWorld);\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nfunction useCamera(camera, props) {\n  var _useThree = reactThreeFiber.useThree(),\n      mouse = _useThree.mouse;\n\n  var _useState = React.useState(function () {\n    var raycaster = new THREE.Raycaster();\n    if (props) reactThreeFiber.applyProps(raycaster, props, {});\n    return function (_, intersects) {\n      raycaster.setFromCamera(mouse, camera instanceof THREE.Camera ? camera : camera.current);\n      var rc = this.constructor.prototype.raycast.bind(this);\n      if (rc) rc(raycaster, intersects);\n    };\n  }),\n      raycast = _useState[0];\n\n  return raycast;\n}\n\nfunction useHelper(object3D, proto) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var helper = React__default.useRef();\n\n  var _useThree = reactThreeFiber.useThree(),\n      scene = _useThree.scene;\n\n  React.useEffect(function () {\n    if (proto && object3D.current) {\n      helper.current = _construct(proto, [object3D.current].concat(args));\n\n      if (helper.current) {\n        scene.add(helper.current);\n      }\n    }\n\n    return function () {\n      if (helper.current) {\n        scene.remove(helper.current);\n      }\n    };\n  }, [scene, proto, object3D, args]);\n  reactThreeFiber.useFrame(function () {\n    if (helper.current) {\n      helper.current.update();\n    }\n  });\n  return helper;\n}\n\nfunction useAspect(type, width, height, factor) {\n  if (factor === void 0) {\n    factor = 1;\n  }\n\n  var _useThree = reactThreeFiber.useThree(),\n      v = _useThree.viewport,\n      aspect = _useThree.aspect;\n\n  var adaptedHeight = height * (aspect > width / height ? v.width / width : v.height / height);\n  var adaptedWidth = width * (aspect > width / height ? v.width / width : v.height / height);\n  return [adaptedWidth * factor, adaptedHeight * factor, 1];\n}\n\nfunction create(type) {\n  var El = type + 'BufferGeometry';\n  return /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n    var args = _ref.args,\n        children = _ref.children,\n        props = _objectWithoutPropertiesLoose(_ref, [\"args\", \"children\"]);\n\n    return /*#__PURE__*/React__default.createElement(\"mesh\", _extends({\n      ref: ref\n    }, props), /*#__PURE__*/React__default.createElement(El, {\n      attach: \"geometry\",\n      args: args\n    }), children);\n  });\n}\n\nvar Box = create('box');\nvar Circle = create('circle');\nvar Cone = create('cone');\nvar Cylinder = create('cylinder');\nvar Sphere = create('sphere');\nvar Plane = create('plane');\nvar Tube = create('tube');\nvar Torus = create('torus');\nvar TorusKnot = create('torusKnot');\nvar Tetrahedron = create('tetrahedron');\nvar Ring = create('ring');\nvar Polyhedron = create('polyhedron');\nvar Icosahedron = create('icosahedron');\nvar Octahedron = create('octahedron');\nvar Dodecahedron = create('dodecahedron');\nvar Extrude = create('extrude');\nvar Lathe = create('lathe');\nvar Parametric = create('parametric');\n\nexports.Box = Box;\nexports.Circle = Circle;\nexports.Cone = Cone;\nexports.Cylinder = Cylinder;\nexports.Detailed = Detailed;\nexports.Dodecahedron = Dodecahedron;\nexports.Extrude = Extrude;\nexports.HTML = HTML;\nexports.Icosahedron = Icosahedron;\nexports.Lathe = Lathe;\nexports.Line = Line;\nexports.MapControls = MapControls;\nexports.MeshWobbleMaterial = MeshWobbleMaterial;\nexports.Octahedron = Octahedron;\nexports.OrbitControls = OrbitControls;\nexports.OrthographicCamera = OrthographicCamera;\nexports.Parametric = Parametric;\nexports.PerspectiveCamera = PerspectiveCamera;\nexports.Plane = Plane;\nexports.Polyhedron = Polyhedron;\nexports.PositionalAudio = PositionalAudio;\nexports.Ring = Ring;\nexports.Shadow = Shadow;\nexports.Sky = Sky;\nexports.Sphere = Sphere;\nexports.StandardEffects = StandardEffects;\nexports.Stars = Stars;\nexports.Stats = Stats;\nexports.Tetrahedron = Tetrahedron;\nexports.Text = Text;\nexports.Torus = Torus;\nexports.TorusKnot = TorusKnot;\nexports.TrackballControls = TrackballControls;\nexports.TransformControls = TransformControls;\nexports.Tube = Tube;\nexports.draco = draco;\nexports.meshBounds = meshBounds;\nexports.softShadows = softShadows;\nexports.useAspect = useAspect;\nexports.useCamera = useCamera;\nexports.useHelper = useHelper;\n"]},"metadata":{},"sourceType":"script"}